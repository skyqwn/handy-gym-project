"use strict";function _toConsumableArray(e){if(Array.isArray(e)){for(var n=0,t=Array(e.length);n<e.length;n++)t[n]=e[n];return t}return Array.from(e)}var fileInput=document.querySelector("input[name=photos]"),preview=document.getElementById("preview"),fakeFileBtn=document.getElementById("fakeFileBtn"),originalPreviews=document.querySelectorAll(".originalPreview"),MAX_FILE=6,dataTransfer=new DataTransfer,startLoading=function(e){e.innerHTML="",e.classList.contains("fa-pen")?(e.classList.remove("fa-pen"),e.classList.add("fa-spinner"),e.classList.add("fa-spin-pulse")):(e.innerHTML='<i class="fa-solid fa-spinner fa-spin-pulse"></i>',e.disable=!0)},endLoading=function(e){e.innerHTML="",e.innerHTML='<i class="fa-solid fa-plus"></i>',e.disable=!1},handleChange=function(e){e.target.files;startLoading(fakeFileBtn)},convertBlobToFile=function(e){return new File([e],e.name||"preview",{type:"images/*"})},generateBtns=function(n){var e=document.createElement("div"),t=(e.innerHTML='<i class="fa-solid fa-xmark"></i>',e.addEventListener("click",function(e){t(n)}),function(n){document.getElementById(n).remove();var e=[].concat(_toConsumableArray(dataTransfer.files)).findIndex(function(e){return e.id===n});dataTransfer.items.remove(e),fileInput.files=dataTransfer.files}),a=document.createElement("div"),i=(a.innerHTML='<i class="fa-solid fa-pen"></i>',a.addEventListener("click",function(e){i(n,e.target)}),function(n,t){var e=document.createElement("input");e.type="file",e.click(),e.addEventListener("change",function(e){return updateChange(e,n,t)})});return{deleteBtn:e,updateBtn:a}},updateChange=async function(e,n,t){try{startLoading(t);var a=generateRandomId(),i=await compressFile(e.target.files[0]);i.id=a,handleUpdateFile(i,n)}catch(e){return console.log(e),void alert("파일 수정 도중 오류발생")}},paintPreview=function(e,n){var t=document.createElement("div"),a=(t.id=n,document.createElement("div")),i=document.createElement("img"),r=URL.createObjectURL(e),e=(i.onload=function(){URL.revokeObjectURL(r)},i.src=r,t.classList.add("previewContainer"),preview.classList.add("previewContainer__img"),a.classList.add("previewContaienr__btn"),generateBtns(n)),n=e.deleteBtn,e=e.updateBtn;a.appendChild(e),a.appendChild(n),t.appendChild(i),t.appendChild(a),preview.append(t)},init=function(){fileInput.addEventListener("change",handleChange),fakeFileBtn.addEventListener("click",function(e){e.preventDefault(),fileInput.click()}),originalPreviews.length};